<script>
let player = document.getElementById("player");
let obstacle = document.getElementById("obstacle");

let obstaclePosition = 0;
let isJumping = false;

// obstacle movement
setInterval(function(){
  obstaclePosition += 3;
  obstacle.style.top = obstaclePosition + "px";

  if(obstaclePosition > 400){
    obstaclePosition = -40; // reset properly
  }

  // positions get cheyyadam
  let playerRect = player.getBoundingClientRect();
  let obstacleRect = obstacle.getBoundingClientRect();

  // proper collision detection
  if (
    playerRect.left < obstacleRect.right &&
    playerRect.right > obstacleRect.left &&
    playerRect.top < obstacleRect.bottom &&
    playerRect.bottom > obstacleRect.top
  ) {
    alert("Game Over ðŸ˜­");
    obstaclePosition = -40;
  }

}, 40);


// smooth jump
function jump(){
  if(isJumping) return;

  isJumping = true;
  let position = 10;

  let up = setInterval(function(){
    if(position >= 120){
      clearInterval(up);

      let down = setInterval(function(){
        if(position <= 10){
          clearInterval(down);
          isJumping = false;
        }
        position -= 5;
        player.style.bottom = position + "px";
      },20);

    }
    position += 5;
    player.style.bottom = position + "px";
  },20);
}

document.addEventListener("click", jump);
</script>
