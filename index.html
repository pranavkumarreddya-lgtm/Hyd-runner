<script>
let player = document.getElementById("player");
let obstacle = document.getElementById("obstacle");

let obstaclePosition = -40;
let isJumping = false;
let gameOver = false;

function moveObstacle(){
  if(gameOver) return;

  obstaclePosition += 3;
  obstacle.style.top = obstaclePosition + "px";

  if(obstaclePosition > 400){
    obstaclePosition = -40;
  }

  let playerRect = player.getBoundingClientRect();
  let obstacleRect = obstacle.getBoundingClientRect();

  if (
    playerRect.left < obstacleRect.right &&
    playerRect.right > obstacleRect.left &&
    playerRect.top < obstacleRect.bottom &&
    playerRect.bottom > obstacleRect.top
  ) {
    gameOver = true;
    alert("Game Over ðŸ˜­ Tap to Restart");
    location.reload(); // clean restart
  }
}

setInterval(moveObstacle, 30);


// Smooth Jump
function jump(){
  if(isJumping || gameOver) return;

  isJumping = true;
  let position = 10;

  let up = setInterval(function(){
    if(position >= 120){
      clearInterval(up);

      let down = setInterval(function(){
        if(position <= 10){
          clearInterval(down);
          isJumping = false;
        }
        position -= 5;
        player.style.bottom = position + "px";
      },20);

    }
    position += 5;
    player.style.bottom = position + "px";
  },20);
}

document.addEventListener("click", jump);
</script>
